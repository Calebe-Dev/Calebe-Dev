<section class="project-form-section">
  <div class="form-container">
    <div class="progress-bar">
      <div class="progress" [style.width]="(currentStep + 1) / steps.length * 100 + '%'"></div>
      <div class="steps">
        <div class="step" 
             *ngFor="let step of steps; let i = index"
             [class.active]="i === currentStep"
             [class.completed]="i < currentStep">
          {{ i + 1 }}
        </div>
      </div>
    </div>

    <div class="form-content">
      <h2>{{ steps[currentStep].title }}</h2>

      <ng-container *ngFor="let question of steps[currentStep].questions">
        <div class="input-container">
          <label class="question-label">{{ question.question }}</label>

          <div *ngIf="question.type === 'radio'" class="radio-options-group">
            <label class="radio-option" *ngFor="let option of question.options">
              <input type="radio" 
                     [name]="question.question" 
                     [value]="option" 
                     [(ngModel)]="answers[question.question]">
              <span class="radio-label">{{ option }}</span>
            </label>
          </div>

          <input *ngIf="question.type === 'text'"
                 [(ngModel)]="answers[question.question]"
                 [placeholder]="question.placeholder || ''">
          
          <textarea *ngIf="question.type === 'textarea'"
                    [(ngModel)]="answers[question.question]"
                    [placeholder]="question.placeholder || ''"></textarea>
        </div>
      </ng-container>

      <div class="form-actions">
        <button class="btn-secondary" *ngIf="currentStep > 0" (click)="previousStep()">Voltar</button>
        <button class="btn-primary" *ngIf="currentStep < steps.length - 1" (click)="nextStep()" [disabled]="!canProceed()">Continuar</button>
        <button class="btn-submit" *ngIf="currentStep === steps.length - 1" (click)="submitForm()" [disabled]="!canProceed()">Enviar</button>
      </div>

      <div *ngIf="showSuccess" class="message success">
        Formulário enviado com sucesso! Entraremos em contato em breve.
      </div>
      <div *ngIf="showError" class="message error">
        Ocorreu um erro ao enviar o formulário. Por favor, tente novamente.
      </div>
    </div>
  </div>
</section>